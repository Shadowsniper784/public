{"ast":null,"code":"import _slicedToArray from\"/home/runner/public/dashboard/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import*as React from\"react\";import{createRef,useState}from\"react\";import{Button,DropdownFooter,DropdownHeader,DropdownItem,DropdownItemContainer,Input}from\"../utils/styles\";import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function update(selected,title,guild){axios.put('/api/guild/'+guild.id+'/config',{title:title,selected:selected});}export var DropdownMenu=function DropdownMenu(_ref){var title=_ref.title,items=_ref.items,guild=_ref.guild;var menuRef=/*#__PURE__*/createRef();var _useState=useState(),_useState2=_slicedToArray(_useState,2),selected=_useState2[0],setSelected=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),expanded=_useState4[0],setExpanded=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),search=_useState6[0],setSearch=_useState6[1];var _useState7=useState(items),_useState8=_slicedToArray(_useState7,2),searchResults=_useState8[0],setSearchResults=_useState8[1];var handleChange=function handleChange(event){var value=event.currentTarget.value;setSearch(value);var filtered=items.filter(function(item){return item.name.toLowerCase().includes(value.toLowerCase());});setSearchResults(filtered);};var resetState=function resetState(){setExpanded(false);setSearchResults(items);setSelected(undefined);setSearch(\"\");};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(DropdownHeader,{onClick:function onClick(){return setExpanded(!expanded);},children:[/*#__PURE__*/_jsx(\"p\",{children:title}),/*#__PURE__*/_jsx(\"p\",{children:selected&&selected.name})]}),/*#__PURE__*/_jsx(DropdownItemContainer,{ref:menuRef,expanded:expanded,children:searchResults.map(function(item){return/*#__PURE__*/_jsx(DropdownItem,{onClick:function onClick(){return setSelected(item);},isSelected:selected&&item.value===selected.value,children:item.name},item.value);})}),expanded&&/*#__PURE__*/_jsxs(DropdownFooter,{children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Button,{style:{marginRight:\"5px\"},disabled:!selected,onClick:function onClick(){return update(selected,title,guild);},children:\"Save\"}),/*#__PURE__*/_jsx(Button,{onClick:resetState,children:\"Collapse\"})]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Input,{onChange:handleChange,value:search,placeholder:\"Search\"})})]})]});};","map":{"version":3,"sources":["/home/runner/public/dashboard/src/components/DropdownMenu.tsx"],"names":["React","createRef","useState","Button","DropdownFooter","DropdownHeader","DropdownItem","DropdownItemContainer","Input","axios","update","selected","title","guild","put","id","DropdownMenu","items","menuRef","setSelected","expanded","setExpanded","search","setSearch","searchResults","setSearchResults","handleChange","event","value","currentTarget","filtered","filter","item","name","toLowerCase","includes","resetState","undefined","map","marginRight"],"mappings":"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","sourcesContent":["import * as React from \"react\";\nimport { createRef, useState } from \"react\";\nimport {\n  Button,\n  DropdownFooter,\n  DropdownHeader,\n  DropdownItem,\n  DropdownItemContainer,\n  Input,\n} from \"../utils/styles\";\nimport { MenuItem } from \"../utils/types\";\nimport axios from 'axios'\n\ntype Props = {\n  title: string;\n  items: MenuItem[];\n  guild: any\n};\nfunction update(selected:MenuItem|undefined,title:string,guild:any) {\n  axios.put('/api/guild/'+guild.id+'/config',{title,selected})\n}\nexport const DropdownMenu = ({ title, items,guild }: Props) => {\n  const menuRef = createRef<HTMLDivElement>();\n  const [selected, setSelected] = useState<MenuItem | undefined>();\n  const [expanded, setExpanded] = useState<boolean>(false);\n  const [search, setSearch] = useState<string>(\"\");\n  const [searchResults, setSearchResults] = useState<MenuItem[]>(items);\n\n  const handleChange = (event: React.FormEvent<HTMLInputElement>) => {\n    const { value } = event.currentTarget;\n    setSearch(value);\n    const filtered = items.filter((item) =>\n      item.name.toLowerCase().includes(value.toLowerCase())\n    );\n    setSearchResults(filtered);\n  };\n\n  const resetState = () => {\n    setExpanded(false);\n    setSearchResults(items);\n    setSelected(undefined);\n    setSearch(\"\");\n  };\n\n  return (\n    <div>\n      <DropdownHeader onClick={() => setExpanded(!expanded)}>\n        <p>{title}</p>\n        <p>{selected && selected.name}</p>\n      </DropdownHeader>\n      <DropdownItemContainer ref={menuRef} expanded={expanded}>\n        {searchResults.map((item) => (\n          <DropdownItem\n            key={item.value}\n            onClick={() => setSelected(item)}\n            isSelected={selected && item.value === selected.value}\n          >\n            {item.name}\n          </DropdownItem>\n        ))}\n      </DropdownItemContainer>\n      {expanded && (\n        <DropdownFooter>\n          <div>\n            <Button style={{ marginRight: \"5px\" }} disabled={!selected} onClick={()=>update(selected,title,guild)}>\n              Save\n            </Button>\n            <Button onClick={resetState}>Collapse</Button>\n          </div>\n          <div>\n            <Input\n              onChange={handleChange}\n              value={search}\n              placeholder=\"Search\"\n            />\n          </div>\n        </DropdownFooter>\n      )}\n    </div>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}